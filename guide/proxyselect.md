# 代理选型

分布式版Redis目前创建页面支持主从型代理以及负载均衡型代理两种代理配置模式

## 主从型代理

### 特性
主从型代理通过主从模式保证代理的高可用服务，用户根据代理使用情况可以选择添加删除代理及扩容缩容代理来完成弹性拓展，在添加完成主从型代理后，分布式版Redis会额外提供一个ip入口，用户可以根据业务属性进行代理入口服务分配

### 拓展
在代理管理页面，用户可以完成添加代理以及扩容代理进行拓展
![image](/images/udredis2024050601.png)

### 注意事项
- 在删除主从型代理时，请确保业务不在使用该代理


## 负载均衡型代理

### 特性
负载均衡型代理采用报文转发型ULB4+Proxy的架构，Proxy作为RServer节点提供服务，用户通过访问ULB4入口，请求根据负载均衡策略分发至代理节点。每个代理节点采用单点模式，当某个节点发生故障，ULB4则会对该节点进行即时主动下线，请求会被转发至正常服务的代理节点。

### 拓展
负载均衡型代理模式下，在代理管理页面同样支持横向以及纵向拓展


### 注意事项
- 负载均衡型代理必须保证至少存在两个代理节点
- 目前只支持创建分布式集群时选择配置负载均衡型代理
- 报文转发型ULB4的性能指标参考[这里](https://docs.ucloud.cn/ulb/intro/performance)
- 使用负载均衡型代理的集群额外收取2核费用作为ULB4资源的费用，[代理计费信息](https://docs.ucloud.cn/uredis/price)



## 模式对比

- 主从型代理通过添加来提供多个ip服务入口，需要业务主动调整；负载均衡型代理模式统一ip入口，隐式完成拓展，业务不需要调整
- 负载均衡型代理拓展上，受限于报文转发ULB4的性能，主从型代理不受此限制
- 负载均衡型代理请求分配主要通过ULB4的报文转发策略，主从型代理请求可以由用户根据实际业务进行流量配置
- 负载均衡型代理各个代理节点为单点模式，因此在代理数量越多时，负载均衡型代理其成本更小、性价比更高
- 负载均衡型代理由于客户端请求会经过ULB4进行转发至代理节点，会存在一定程度的延时的升高



