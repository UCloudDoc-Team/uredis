## 数据回档

主备版Redis提供秒级的数据回档的功能，在开启了数据回档功能之后，您可以将实例整体的数据恢复到某个秒级的时间点（恢复到新实例）。数据回档拥有更加精细化的数据恢复的能力，能最大程度的保护您的数据安全。
目前支持数据回档的主备实例版本为：4.0, 5.0, 6.0。

### 数据回档功能概述
为了保护您的业务数据，主备版本的Redis支持数据回档的功能，原理是基于AOF（Append-only-file）的持久化机制，将AOF增量数据进行归档，可以实现秒级别的恢复，提升运维便捷性。

### 开启数据回档功能
![image](/images/aofrollback_open.png)


### 调整回档空间大小
当您的归档的AOF增量数据超过了缩购买的指定大小时，老的AOF增量数据文件会被删除掉，所以为了您能够存储更多的数据大小，在空间不足时可以调整回档的存储空间大小。

![image](/images/aofrollback_resize1.png)
![image](/images/aofrollback_resize2.png)


### 选定指定文件进行回档
在进行回档时，需要选择执行的文件，然后选择要回档的时间（注意，回档时间要在该AOF文件所包含的时间范围内）
![image](/images/aofrollback_rollback.png)

选择时间，并购买
![image](/images/aofrollback_selecttime.png)

## 使用注意事项
+ 实例缩容之后，然后进行数据回档的操作，有可能选择的时间点的内存数据容量会大于当前的实例规格，因此在进行数据回档时，请您选择一个合适的规格大小，否则会造成数据回档的失败。
+ 数据回档新建的实例控制台上显示状态为“运行”，此时服务可能正在加载AOF数据，实际服务是不可用的，根据实际的AOF文件大小，可能需要等待1-10分钟左右Redis服务才可用。